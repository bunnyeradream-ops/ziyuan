<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>泰国独立站 · Coming Soon</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/style.css" />
</head>
<body>
  <main class="container">
    <section class="card">
      <h1>泰国独立站</h1>
      <p class="desc">项目已完成仓库隔离与初始化，正在接入云效部署。</p>
      <div class="actions">
        <a class="btn" href="https://github.com/bunnyeradream-ops/ziyuan" target="_blank" rel="noopener">查看仓库</a>
      </div>
      <p class="note">Coming Soon · 云效流水线配置与部署完成后，这里将展示正式站点。</p>
      <hr class="divider" />
      <h2>库存看板</h2>
      <p class="desc">当前为本地演示数据。云端部署后将接入受控数据源。</p>
      <div class="inv-summary">可售合计：<span id="inv-total">-</span></div>
      <div class="table-wrap">
        <table class="table">
          <thead>
            <tr>
              <th>SKU</th>
              <th>名称</th>
              <th>仓位</th>
              <th>总数量</th>
              <th>已占用</th>
              <th>可售</th>
            </tr>
          </thead>
          <tbody id="inv-body"></tbody>
        </table>
      </div>
      <div id="inv-error" class="error"></div>
    </section>
  </main>
  <script>
    (function(){
      fetch('/data/inventory.json')
        .then(function(r){ return r.json(); })
        .then(function(data){
          var tbody = document.getElementById('inv-body');
          var totalEl = document.getElementById('inv-total');
          var sumAvail = 0;
          (data.items || []).forEach(function(it){
            var avail = (it.qty || 0) - (it.reserved || 0);
            sumAvail += avail;
            var tr = document.createElement('tr');
            tr.innerHTML = '<td>' + (it.sku || '-') + '</td>' +
                           '<td>' + (it.name || '-') + '</td>' +
                           '<td>' + (it.location || '-') + '</td>' +
                           '<td>' + (it.qty || 0) + '</td>' +
                           '<td>' + (it.reserved || 0) + '</td>' +
                           '<td>' + avail + '</td>';
            tbody.appendChild(tr);
          });
          if (totalEl) totalEl.textContent = sumAvail;
        })
        .catch(function(err){
          var errEl = document.getElementById('inv-error');
          if (errEl) errEl.textContent = '数据未配置或加载失败';
          console.error('inventory load error', err);
        });
    })();
  </script>
</body>
</html>